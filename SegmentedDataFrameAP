waitdata<- read_excel('WaitData.xlsx', sheet= 3)

#create a column for appointments by days of week 
 library(lubridate)

waitdata$parsedappt<- parse_date_time(waitdata$x_ScheduledDTTM, 'y-m-d H:M:S')
 
waitdata$calendar<- date(waitdata$parsedappt)

#create a  table to start the data frame 
calendarsum<- table(waitdata$calendar)
segmenteddata<- as.data.frame (calendarsum)

colnames(segmenteddata)<- c('date', 'sumofappts')

#add add wait times per day 

segmenteddata$dailywait<-tapply(waitdata$Wait, waitdata$calendar, FUN = sum)

# add avg wait line count per day 

segmenteddata$linecountavg <- tapply(waitdata$LineCount0Strict, waitdata$calendar, FUN= sum)

# add outpatient wait time 

segmenteddata$outpatientwaitsum<- tapply (waitdata$OutpatientWaitingCount, waitdata$calendar, FUN=sum)

# average scanners per day 
segmenteddata$dailyscan <- tapply (waitdata$NumScannersUsedToday, waitdata$calendar, FUN= mean)

